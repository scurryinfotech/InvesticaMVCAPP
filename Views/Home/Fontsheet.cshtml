@{
    ViewData["Title"] = "Frontsheet";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Styles {
    <link href="~/css/Fontsheet.css" rel="stylesheet" />
}

<div class="container-custom">
    @Html.Partial("~/Views/Shared/_frontSheetLeftPanel.cshtml")

    <div class="dashboard">
        <div class="card p-0">

            <!-- Frontsheet Selector Section -->
            <div style="background:#f8f9fa; padding:15px; border-bottom:2px solid #0f1445;">
                <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
                    <div style="flex:1; min-width:250px;">
                        <label style="font-weight:bold; font-size:11px; display:block; margin-bottom:5px;">SELECT FRONTSHEET:</label>

                        <!-- Searchable wrapper for frontsheets -->
                        <div id="frontsheetSelector-wrapper" class="searchable-dropdown-wrapper" style="position:relative;">
                            <input type="text" id="frontsheetSearch" class="searchable-input form-control" placeholder="-- Select Frontsheet --" autocomplete="off" />
                            <input type="hidden" id="frontsheetSelector" />
                            <ul class="searchable-dropdown-list list-group" style="position:absolute; z-index:999; display:none; max-height:220px; overflow:auto; width:100%;"></ul>
                        </div>
                    </div>
                    <div style="display:flex; gap:10px; align-items:flex-end;">
                        <button class="btn btn-success" id="createNewFrontsheet" style="padding:8px 15px; font-size:12px; font-weight:bold;">
                            <i class="fa fa-plus"></i> New
                        </button>
                        <button class="btn btn-danger" id="deleteFrontsheet" style="padding:8px 15px; font-size:12px; font-weight:bold;">
                            <i class="fa fa-trash"></i> Delete
                        </button>
                    </div>
                </div>
            </div>

            <!-- Frontsheet Content -->
            <div id="frontsheet">
                <div class="sheet-wrap">

                    <!-- Header -->
                    <div class="header">
                        <div class="logo">INVESTICA</div>
                        <div class="title">INVESTICA</div>
                        <div class="crn">
                            <div class="label">CRN NO:</div>
                            <div class="box value" id="fs_crn" contenteditable="false">\u2014</div>
                        </div>
                    </div>

                    <div class="subtitle">NEW CLIENT ACQUISITION / EXISTING CLIENT UPDATE APPLICATION FORM</div>

                    <div class="content">

                        <!-- NAME -->
                        <div class="row">
                            <div class="col block">
                                <div class="title-small">NAME / ENTITY NAME:</div>

                                <!-- Inline entity name control (acts as dropdown when editing). -->
                                <div id="fs_name-wrapper" class="searchable-dropdown-wrapper" style="position:relative; margin-bottom:6px;">
                                    <input type="text" id="fs_name_input" class="searchable-input form-control" placeholder="—" readonly autocomplete="off" />
                                    <input type="hidden" id="companySelector" />
                                    <ul class="searchable-dropdown-list list-group" style="position:absolute; z-index:999; display:none; max-height:220px; overflow:auto; width:100%;"></ul>
                                </div>

                                <!-- fallback/display area (kept for printing/layout) -->
                                <div id="fs_name_display" class="value" style="display:none;" contenteditable="false">\u2014</div>
                            </div>
                        </div>

                        <!-- ADDRESS -->
                        <div class="row">
                            <div class="col block">
                                <div class="title-small">ADDRESS:</div>
                                <div id="fs_address" class="value" contenteditable="false">\u2014</div>
                            </div>
                        </div>

                        <!-- Contact + Email -->
                        <div class="row">
                            <div class="col block">
                                <div class="title-small">CONTACT: PHONE / MOB.</div>
                                <div id="fs_phone" class="small-value" contenteditable="false">\u2014</div>
                            </div>

                            <div class="col block">
                                <div class="title-small">E-MAIL ID:</div>
                                <div id="fs_email" class="small-value" contenteditable="false">\u2014</div>
                            </div>
                        </div>

                        <!-- NATURE OF BUSINESS -->
                        <div class="row">
                            <div class="col block">
                                <div class="title-small">NATURE OF BUSINESS</div>
                                <div id="fs_business" class="small-value" contenteditable="false">\u2014</div>
                            </div>
                        </div>

                        <!-- Entity Type + Date of Incorporation + Entity PAN + CIN -->
                        <div class="row">
                            <div class="col block" style="flex:0 0 18%;">
                                <div class="title-small">ENTITY TYPE</div>
                                <div id="fs_entitytype-wrapper" class="searchable-dropdown-wrapper" style="position:relative;">
                                    <input type="text" id="fs_entitytype_display" class="searchable-input small-value form-control" placeholder="—" readonly />
                                    <input type="hidden" id="fs_entitytype" />
                                    <ul class="searchable-dropdown-list list-group" style="position:absolute; z-index:999; display:none; max-height:160px; overflow:auto; width:100%;"></ul>
                                </div>
                            </div>
                            <div class="col block" style="flex:0 0 20%;">
                                <div class="title-small">DATE OF INCORP.</div>
                                <div id="fs_incop" class="small-value" contenteditable="false">\u2014</div>
                            </div>

                            <div class="col block" style="flex:0 0 22%;">
                                <div class="title-small">ENTITY PAN</div>
                                <div id="fs_epan" class="small-value" contenteditable="false">\u2014</div>
                            </div>


                            <div class="col block">
                                <div class="title-small">CIN NUMBER</div>
                                <div id="fs_cin" class="small-value" contenteditable="false">\u2014</div>
                            </div>

                        </div>

                        <!-- NEW: Persons in columns with Name, Address, and PAN & Aadhar separate -->
                        <div class="persons-columns-container">
                            <div class="persons-header" id="personsHeader">
                                <div class="title-small" style="flex:1;margin-bottom:0;">INDIVIDUAL / PROMOTER / PARTNER / DIRECTOR / HUF</div>
                                <div style="display:flex;align-items:center;gap:6px;">
                                    <button type="button" id="addPersonBtn" class="btn btn-primary add-person" title="Add person">+ Add</button>
                                </div>
                            </div>

                            <!-- Inline form will be injected here when adding/editing a person -->
                            <div id="personFormHolder"></div>

                            <div id="personsContainer" class="persons-columns" aria-live="polite"></div>
                        </div>

                        <!-- DOB + Gender + Father's Name in one row -->
                        <div class="row">
                            <div class="col block" style="flex:0 0 20%;">
                                <div class="title-small">DOB</div>
                                <div id="fs_dob" class="small-value" contenteditable="false">\u2014</div>
                            </div>
                            <div class="col block" style="flex:0 0 16%;">
                                <div class="title-small">GENDER</div>
                                <div id="fs_gender" class="small-value" contenteditable="false">\u2014</div>
                            </div>

                            <div class="col block">
                                <div class="title-small">FATHER'S NAME</div>
                                <div id="fs_father" class="small-value" contenteditable="false">\u2014</div>
                            </div>
                        </div>

                        <!-- Marital Status -->
                        <div class="row">
                            <div class="col block">
                                <div class="title-small">MARITAL STATUS</div>
                                <div id="fs_marital" class="small-value" contenteditable="false">\u2014</div>
                            </div>
                        </div>

                        <!-- Entity Location: Area + Ward + Zone -->
                        <div class="row">
                            <div class="col block">
                                <div class="title-small">ENTITY LOCATION</div>
                                <div class="grid-3" style="margin-top:2px;">
                                    <div>
                                        <div class="muted">AREA:</div>
                                        <div id="fs_area" class="small-value" contenteditable="false">\u2014</div>
                                    </div>
                                    <div>
                                        <div class="muted">WARD:</div>
                                        <div id="fs_ward" class="small-value" contenteditable="false">\u2014</div>
                                    </div>
                                    <div>
                                        <div class="muted">ZONE:</div>
                                        <div id="fs_zone" class="small-value" contenteditable="false">\u2014</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Product / Service -->
                        <div class="row">
                            <div class="col block">
                                <div class="title-small">PRODUCT / SERVICE SOLD</div>
                                <div id="fs_product" class="value" contenteditable="false">\u2014</div>
                            </div>
                        </div>

                        <!-- Documents KYC - ALL IN SINGLE ROW -->
                        <div class="row">
                            <div class="col block">
                                <div class="title-small">DOCUMENTS / KYC SUBMITTED (\u2714)</div>

                                <!-- Checkboxes in single row -->
                                <div class="docs-single-row">
                                    <label><input type="checkbox" id="cb_pan"> PAN</label>
                                    <label><input type="checkbox" id="cb_aadhar"> AADHAR</label>
                                    <label><input type="checkbox" id="cb_entity"> ENTITY</label>
                                    <label><input type="checkbox" id="cb_addr"> ADDRESS</label>
                                    <label><input type="checkbox" id="cb_bank"> BANK</label>
                                    <label><input type="checkbox" id="cb_photo"> PHOTO</label>
                                    <label><input type="checkbox" id="cb_shop"> SHOP</label>
                                    <label><input type="checkbox" id="cb_mda"> MDA/COI/AOA</label>
                                </div>

                                <!-- Two column layout: Left = Client Source + Sourced By, Right = Additional Details Table -->
                                <div class="docs-additional-wrapper">
                                    <!-- LEFT SIDE: Client Source and Sourced By stacked -->
                                    <div class="left-source-section">
                                        <div class="block">
                                            <div class="title-small">CLIENT SOURCE</div>
                                            <div id="fs_source" class="small-value" contenteditable="false">\u2014</div>
                                        </div>
                                        <div class="block">
                                            <div class="title-small">SOURCED BY (EMP. ID)</div>
                                            <div id="fs_sourcedby" class="small-value" contenteditable="false">\u2014</div>
                                        </div>
                                    </div>

                                    <!-- RIGHT SIDE: Additional Details Table -->
                                    <div>
                                        <div class="title-small">ADDITIONAL DETAILS</div>
                                        <table class="add-table">
                                            <tbody>
                                                <tr>
                                                    <td>ELECTRIC BILL NO:</td>
                                                    <td id="fs_electric" contenteditable="false">\u2014</td>
                                                </tr>
                                                <tr>
                                                    <td>PROPERTY TAX NO:</td>
                                                    <td id="fs_proptax" contenteditable="false">\u2014</td>
                                                </tr>
                                                <tr>
                                                    <td>SQ FT:</td>
                                                    <td id="fs_sqft" contenteditable="false">\u2014</td>
                                                </tr>
                                                <tr>
                                                    <td>OTHER DETAILS:</td>
                                                    <td id="fs_otherdoc" contenteditable="false">\u2014</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Cross Sell + Details -->
                        <div class="row">
                            <div class="col block">
                                <div class="title-small">CROSS SELL OF OTHER PRODUCTS</div>
                                <div id="fs_crosssell" class="small-value" contenteditable="false">\u2014</div>
                            </div>
                            <div class="col block" style="flex:0 0 35%;">
                                <div class="title-small">DETAILS</div>
                                <div id="fs_crossdetails" class="small-value" contenteditable="false">\u2014</div>
                            </div>
                        </div>

                        <!-- Comments + Internal Details side by side -->
                        <div class="row">
                            <div class="col block">
                                <div class="title-small">COMMENTS / REMARKS</div>
                                <div id="fs_comments" class="value" contenteditable="false" style="min-height:50px;">\u2014</div>
                               
                            </div>

                            <div class="col block" style="flex:0 0 42%;">
                                <div class="title-small">OTHER INTERNAL DETAILS</div>
                                <div class="internal-compact">
                                    <div class="left">
                                        <div>
                                            <div class="muted">LOGIN: </div>
                                            <div id="fs_login" class="small-value" contenteditable="false">\u2014</div>
                                        </div>
                                        <div>
                                            <div class="muted">PSWRD:</div>
                                            <div id="fs_password" class="small-value" contenteditable="false">\u2014</div>
                                        </div>
                                        <div class="right">
                                            <div class="muted">DETAILS:</div>
                                            <div id="fs_details" class="details" contenteditable="false">\u2014</div>
                                        </div>
                                    </div>
                                    <div class="col block" style="flex:0 0 42%;">
                                        <div class="right">
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>

                        <!-- Signatures -->
                        <div class="signs">
                            <div class="sign">
                                <div class="line"></div>
                                <div>APPLICANT SIGNATURE</div>
                                <div class="muted">WITH STAMP / SEAL</div>
                            </div>
                            <div class="sign">
                                <div class="line"></div>
                                <div>INVESTICA OFFICER SIGN</div>
                                <div class="muted">DOCS VERIFIED WITH ORIGINAL</div>
                            </div>
                        </div>

                        <!-- Document scanned -->
                        <div class="scanned">
                            <div style="font-weight:900;color:var(--brand);font-size:9.5px;margin-bottom:2px;">DOCUMENT SCANNED, UPLOADED, BACKED UP BY:</div>
                            <div class="grid-2">
                                <div>
                                    <div class="muted">NAME:</div>
                                    <div id="fs_docname" class="small-value" contenteditable="false">\u2014</div>
                                </div>
                                <div>
                                    <div class="muted">SIGN:</div>
                                    <div id="fs_docsign" class="small-value" contenteditable="false">\u2014</div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <!-- Actions -->
                    <div class="actions">
                        <button class="btn btn-edit" id="editBtn">Edit Form</button>
                        <button class="btn btn-cancel" id="cancelEditBtn" style="display:none; margin-left:8px;">Discard</button>
                        <button class="btn btn-print" id="printBtn">Print</button>
                        <button class="btn btn-sample" id="sampleBtn">Fill Demo</button>
                    </div>
                </div>
            </div>

        </div>
    </div>

</div>

@section Scripts {
    <script src="~/js/Fontsheet.js"></script>
    <script src="~/js/LeftPanel.js"></script>
}